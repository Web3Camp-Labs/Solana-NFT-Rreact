function ir(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Ve(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function ar(t){return new TextEncoder().encode(t)}function cr(t){return new TextDecoder().decode(t)}function ur(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),i=o.charCodeAt(0);if(r[i]!==255)throw new TypeError(o+" is ambiguous");r[i]=s}var a=t.length,d=t.charAt(0),w=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function C(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";for(var p=0,O=0,g=0,v=c.length;g!==v&&c[g]===0;)g++,p++;for(var $=(v-g)*l+1>>>0,b=new Uint8Array($);g!==v;){for(var x=c[g],U=0,y=$-1;(x!==0||U<O)&&y!==-1;y--,U++)x+=256*b[y]>>>0,b[y]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");O=U,g++}for(var E=$-O;E!==$&&b[E]===0;)E++;for(var B=d.repeat(p);E<$;++E)B+=t.charAt(b[E]);return B}function D(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;var p=0;if(c[p]!==" "){for(var O=0,g=0;c[p]===d;)O++,p++;for(var v=(c.length-p)*w+1>>>0,$=new Uint8Array(v);c[p];){var b=r[c.charCodeAt(p)];if(b===255)return;for(var x=0,U=v-1;(b!==0||x<g)&&U!==-1;U--,x++)b+=a*$[U]>>>0,$[U]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");g=x,p++}if(c[p]!==" "){for(var y=v-g;y!==v&&$[y]===0;)y++;for(var E=new Uint8Array(O+(v-y)),B=O;y!==v;)E[B++]=$[y++];return E}}}function I(c){var p=D(c);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:C,decodeUnsafe:D,decode:I}}var dr=ur,hr=dr;let lr=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},fr=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){this.name=e,this.prefix=r;const s=r.codePointAt(0);if(s===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=s,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return xt(this,e)}},pr=class{decoders;constructor(e){this.decoders=e}or(e){return xt(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function xt(t,e){return new pr({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}let br=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new lr(e,r,n),this.decoder=new fr(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function fe({name:t,prefix:e,encode:r,decode:n}){return new br(t,e,r,n)}function te({name:t,prefix:e,alphabet:r}){const{encode:n,decode:s}=hr(r,t);return fe({prefix:e,name:t,encode:n,decode:o=>Ve(s(o))})}function wr(t,e,r,n){const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let o=t.length;for(;t[o-1]==="=";)--o;const i=new Uint8Array(o*r/8|0);let a=0,d=0,w=0;for(let l=0;l<o;++l){const C=s[t[l]];if(C===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<r|C,a+=r,a>=8&&(a-=8,i[w++]=255&d>>a)}if(a>=r||255&d<<8-a)throw new SyntaxError("Unexpected end of data");return i}function gr(t,e,r){const n=e[e.length-1]==="=",s=(1<<r)-1;let o="",i=0,a=0;for(let d=0;d<t.length;++d)for(a=a<<8|t[d],i+=8;i>r;)i-=r,o+=e[s&a>>i];if(i!==0&&(o+=e[s&a<<r-i]),n)for(;o.length*r&7;)o+="=";return o}function P({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return fe({prefix:e,name:t,encode(s){return gr(s,n,r)},decode(s){return wr(s,n,r,t)}})}const _=te({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yr=te({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),mr=Object.freeze(Object.defineProperty({__proto__:null,base58btc:_,base58flickr:yr},Symbol.toStringTag,{value:"Module"})),V=P({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vr=P({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),$r=P({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),xr=P({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Sr=P({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Er=P({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Cr=P({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ar=P({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ur=P({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Pr=Object.freeze(Object.defineProperty({__proto__:null,base32:V,base32hex:Sr,base32hexpad:Cr,base32hexpadupper:Ar,base32hexupper:Er,base32pad:$r,base32padupper:xr,base32upper:vr,base32z:Ur},Symbol.toStringTag,{value:"Module"})),oe=te({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),zr=te({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Mr=Object.freeze(Object.defineProperty({__proto__:null,base36:oe,base36upper:zr},Symbol.toStringTag,{value:"Module"}));var Tr=St,He=128,Or=127,Ir=~Or,Dr=Math.pow(2,31);function St(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Dr;)e[r++]=t&255|He,t/=128;for(;t&Ir;)e[r++]=t&255|He,t>>>=7;return e[r]=t|0,St.bytes=r-n+1,e}var Nr=Pe,_r=128,Ye=127;function Pe(t,n){var r=0,n=n||0,s=0,o=n,i,a=t.length;do{if(o>=a)throw Pe.bytes=0,new RangeError("Could not decode varint");i=t[o++],r+=s<28?(i&Ye)<<s:(i&Ye)*Math.pow(2,s),s+=7}while(i>=_r);return Pe.bytes=o-n,r}var Fr=Math.pow(2,7),Lr=Math.pow(2,14),Br=Math.pow(2,21),jr=Math.pow(2,28),Rr=Math.pow(2,35),Vr=Math.pow(2,42),kr=Math.pow(2,49),qr=Math.pow(2,56),Wr=Math.pow(2,63),Gr=function(t){return t<Fr?1:t<Lr?2:t<Br?3:t<jr?4:t<Rr?5:t<Vr?6:t<kr?7:t<qr?8:t<Wr?9:10},Jr={encode:Tr,decode:Nr,encodingLength:Gr},ae=Jr;function ze(t,e=0){return[ae.decode(t,e),ae.decode.bytes]}function ce(t,e,r=0){return ae.encode(t,e,r),e}function ue(t){return ae.encodingLength(t)}function Qr(t,e){const r=e.byteLength,n=ue(t),s=n+ue(r),o=new Uint8Array(s+r);return ce(t,o,0),ce(r,o,n),o.set(e,s),new ke(t,r,e,o)}function Et(t){const e=Ve(t),[r,n]=ze(e),[s,o]=ze(e.subarray(n)),i=e.subarray(n+o);if(i.byteLength!==s)throw new Error("Incorrect length");return new ke(r,s,i,e)}function Xr(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&ir(t.bytes,r.bytes)}}let ke=class{code;size;digest;bytes;constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};function et(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return Zr(r,Me(t),e??_.encoder);default:return Hr(r,Me(t),e??V.encoder)}}const tt=new WeakMap;function Me(t){const e=tt.get(t);if(e==null){const r=new Map;return tt.set(t,r),r}return e}let Ct=class M{code;version;multihash;bytes;"/";constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==X)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Yr)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return M.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=Qr(e,r);return M.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return M.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&Xr(e.multihash,n.multihash)}toString(e){return et(this,e)}toJSON(){return{"/":et(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof M)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:s,multihash:o,bytes:i}=r;return new M(n,s,o,i??rt(n,s,o.bytes))}else if(r[en]===!0){const{version:n,multihash:s,code:o}=r,i=Et(s);return M.create(n,o,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==X)throw new Error(`Version 0 CID must use dag-pb (code: ${X}) block encoding`);return new M(e,r,n,n.bytes)}case 1:{const s=rt(e,r,n.bytes);return new M(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return M.create(0,X,e)}static createV1(e,r){return M.create(1,e,r)}static decode(e){const[r,n]=M.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=M.inspectBytes(e),n=r.size-r.multihashSize,s=Ve(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");const o=s.subarray(r.multihashSize-r.digestSize),i=new ke(r.multihashCode,r.digestSize,o,s);return[r.version===0?M.createV0(i):M.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[C,D]=ze(e.subarray(r));return r+=D,C};let s=n(),o=X;if(s===18?(s=0,r=0):o=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);const i=r,a=n(),d=n(),w=r+d,l=w-i;return{version:s,codec:o,multihashCode:a,digestSize:d,multihashSize:l,size:w}}static parse(e,r){const[n,s]=Kr(e,r),o=M.decode(s);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Me(o).set(n,e),o}};function Kr(t,e){switch(t[0]){case"Q":{const r=e??_;return[_.prefix,r.decode(`${_.prefix}${t}`)]}case _.prefix:{const r=e??_;return[_.prefix,r.decode(t)]}case V.prefix:{const r=e??V;return[V.prefix,r.decode(t)]}case oe.prefix:{const r=e??oe;return[oe.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function Zr(t,e,r){const{prefix:n}=r;if(n!==_.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const s=e.get(n);if(s==null){const o=r.encode(t).slice(1);return e.set(n,o),o}else return s}function Hr(t,e,r){const{prefix:n}=r,s=e.get(n);if(s==null){const o=r.encode(t);return e.set(n,o),o}else return s}const X=112,Yr=18;function rt(t,e,r){const n=ue(t),s=n+ue(e),o=new Uint8Array(s+r.byteLength);return ce(t,o,0),ce(e,o,n),o.set(r,s),o}const en=Symbol.for("@ipld/js-cid/CID");function tn(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}const rn=te({prefix:"9",name:"base10",alphabet:"0123456789"}),nn=Object.freeze(Object.defineProperty({__proto__:null,base10:rn},Symbol.toStringTag,{value:"Module"})),sn=P({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),on=P({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),an=Object.freeze(Object.defineProperty({__proto__:null,base16:sn,base16upper:on},Symbol.toStringTag,{value:"Module"})),cn=P({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),un=Object.freeze(Object.defineProperty({__proto__:null,base2:cn},Symbol.toStringTag,{value:"Module"})),At=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),dn=At.reduce((t,e,r)=>(t[r]=e,t),[]),hn=At.reduce((t,e,r)=>{const n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return t[n]=r,t},[]);function ln(t){return t.reduce((e,r)=>(e+=dn[r],e),"")}function fn(t){const e=[];for(const r of t){const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);const s=hn[n];if(s==null)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const pn=fe({prefix:"🚀",name:"base256emoji",encode:ln,decode:fn}),bn=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:pn},Symbol.toStringTag,{value:"Module"})),wn=P({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),gn=P({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yn=P({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),mn=P({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),vn=Object.freeze(Object.defineProperty({__proto__:null,base64:wn,base64pad:gn,base64url:yn,base64urlpad:mn},Symbol.toStringTag,{value:"Module"})),$n=P({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),xn=Object.freeze(Object.defineProperty({__proto__:null,base8:$n},Symbol.toStringTag,{value:"Module"})),Sn=fe({prefix:"\0",name:"identity",encode:t=>cr(t),decode:t=>ar(t)}),En=Object.freeze(Object.defineProperty({__proto__:null,identity:Sn},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Te={...En,...un,...xn,...nn,...an,...Pr,...Mr,...mr,...vn,...bn};function Ut(t=0){return new Uint8Array(t)}function Pt(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const nt=Pt("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Se=Pt("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Ut(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),zt={utf8:nt,"utf-8":nt,hex:Te.base16,latin1:Se,ascii:Se,binary:Se,...Te};function L(t,e="utf8"){const r=zt[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}function Cn(t=0){return new Uint8Array(t)}const An=Math.pow(2,7),Un=Math.pow(2,14),Pn=Math.pow(2,21),qe=Math.pow(2,28),We=Math.pow(2,35),Ge=Math.pow(2,42),Je=Math.pow(2,49),f=128,T=127;function R(t){if(t<An)return 1;if(t<Un)return 2;if(t<Pn)return 3;if(t<qe)return 4;if(t<We)return 5;if(t<Ge)return 6;if(t<Je)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function zn(t,e,r=0){switch(R(t)){case 8:e[r++]=t&255|f,t/=128;case 7:e[r++]=t&255|f,t/=128;case 6:e[r++]=t&255|f,t/=128;case 5:e[r++]=t&255|f,t/=128;case 4:e[r++]=t&255|f,t>>>=7;case 3:e[r++]=t&255|f,t>>>=7;case 2:e[r++]=t&255|f,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function Mn(t,e,r=0){switch(R(t)){case 8:e.set(r++,t&255|f),t/=128;case 7:e.set(r++,t&255|f),t/=128;case 6:e.set(r++,t&255|f),t/=128;case 5:e.set(r++,t&255|f),t/=128;case 4:e.set(r++,t&255|f),t>>>=7;case 3:e.set(r++,t&255|f),t>>>=7;case 2:e.set(r++,t&255|f),t>>>=7;case 1:{e.set(r++,t&255),t>>>=7;break}default:throw new Error("unreachable")}return e}function Tn(t,e){let r=t[e],n=0;if(n+=r&T,r<f||(r=t[e+1],n+=(r&T)<<7,r<f)||(r=t[e+2],n+=(r&T)<<14,r<f)||(r=t[e+3],n+=(r&T)<<21,r<f)||(r=t[e+4],n+=(r&T)*qe,r<f)||(r=t[e+5],n+=(r&T)*We,r<f)||(r=t[e+6],n+=(r&T)*Ge,r<f)||(r=t[e+7],n+=(r&T)*Je,r<f))return n;throw new RangeError("Could not decode varint")}function On(t,e){let r=t.get(e),n=0;if(n+=r&T,r<f||(r=t.get(e+1),n+=(r&T)<<7,r<f)||(r=t.get(e+2),n+=(r&T)<<14,r<f)||(r=t.get(e+3),n+=(r&T)<<21,r<f)||(r=t.get(e+4),n+=(r&T)*qe,r<f)||(r=t.get(e+5),n+=(r&T)*We,r<f)||(r=t.get(e+6),n+=(r&T)*Ge,r<f)||(r=t.get(e+7),n+=(r&T)*Je,r<f))return n;throw new RangeError("Could not decode varint")}function pe(t,e,r=0){return e==null&&(e=Cn(R(t))),e instanceof Uint8Array?zn(t,e,r):Mn(t,e,r)}function re(t,e=0){return t instanceof Uint8Array?Tn(t,e):On(t,e)}function k(t,e){e==null&&(e=t.reduce((s,o)=>s+o.length,0));const r=Ut(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}class In{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){const r=this.index,n=e();return n===void 0&&(this.index=r),n}parseWith(e){const r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const r=this.readChar();if(r===e)return r})}readSeparator(e,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,r,n,s){return this.readAtomically(()=>{let o=0,i=0;const a=this.peekChar();if(a===void 0)return;const d=a==="0",w=2**(8*s)-1;for(;;){const l=this.readAtomically(()=>{const C=this.readChar();if(C===void 0)return;const D=Number.parseInt(C,e);if(!Number.isNaN(D))return D});if(l===void 0)break;if(o*=e,o+=l,o>w||(i+=1,r!==void 0&&i>r))return}if(i!==0)return!n&&d&&i>1?void 0:o})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let r=0;r<e.length;r++){const n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[r]=n}return e})}readIPv6Addr(){const e=r=>{for(let n=0;n<r.length/2;n++){const s=n*2;if(n<r.length-3){const i=this.readSeparator(":",n,()=>this.readIPv4Addr());if(i!==void 0)return r[s]=i[0],r[s+1]=i[1],r[s+2]=i[2],r[s+3]=i[3],[s+4,!0]}const o=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(o===void 0)return[s,!1];r[s]=o>>8,r[s+1]=o&255}return[r.length,!1]};return this.readAtomically(()=>{const r=new Uint8Array(16),[n,s]=e(r);if(n===16)return r;if(s||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const o=new Uint8Array(14),i=16-(n+2),[a]=e(o.subarray(0,i));return r.set(o.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const Mt=45,Dn=15,J=new In;function Nn(t){if(!(t.length>Dn))return J.new(t).parseWith(()=>J.readIPv4Addr())}function _n(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>Mt))return J.new(t).parseWith(()=>J.readIPv6Addr())}function Fn(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>Mt))return J.new(t).parseWith(()=>J.readIPAddr())}function Tt(t,e="utf8"){const r=zt[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}function Ln(t){return!!Nn(t)}function Bn(t){return!!_n(t)}function Ot(t){return!!Fn(t)}const st=Ln,jn=Bn,It=function(t){let e=0;if(t=t.toString().trim(),st(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(jn(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){const o=st(r[n]);let i;o&&(i=It(r[n]),r[n]=L(i.slice(0,2),"base16")),i!=null&&++n<8&&r.splice(n,0,L(i.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);const o=[n,1];for(n=9-r.length;n>0;n--)o.push("0");r.splice.apply(r,o)}const s=new Uint8Array(e+16);for(n=0;n<r.length;n++){const o=parseInt(r[n],16);s[e++]=o>>8&255,s[e++]=o&255}return s}throw new Error("invalid ip address")},Rn=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(r===4){const s=[];for(let o=0;o<r;o++)s.push(t[e+o]);return s.join(".")}if(r===16){const s=[];for(let o=0;o<r;o+=2)s.push(n.getUint16(e+o).toString(16));return s.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},N=-1,Y={},Oe={},Vn=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,N,"ip6zone"],[43,8,"ipcidr"],[53,N,"dns",!0],[54,N,"dns4",!0],[55,N,"dns6",!0],[56,N,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,N,"unix",!1,!0],[421,N,"ipfs"],[421,N,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,N,"garlic64"],[448,0,"tls"],[449,N,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,N,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,N,"http-path"],[777,N,"memory"]];Vn.forEach(t=>{const e=kn(...t);Oe[e.code]=e,Y[e.name]=e});function kn(t,e,r,n,s){return{code:t,size:e,name:r,resolvable:!!n,path:!!s}}function m(t){if(typeof t=="number"){if(Oe[t]!=null)return Oe[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(Y[t]!=null)return Y[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}m("ip4");m("ip6");m("ipcidr");function Dt(t,e){switch(m(t).code){case 4:case 41:return Wn(e);case 42:return Ae(e);case 6:case 273:case 33:case 132:return Nt(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Ae(e);case 421:return Xn(e);case 444:return at(e);case 445:return at(e);case 466:return Qn(e);case 481:return globalThis.encodeURIComponent(Ae(e));default:return L(e,"base16")}}function ot(t,e){switch(m(t).code){case 4:return it(e);case 41:return it(e);case 42:return Ce(e);case 6:case 273:case 33:case 132:return Qe(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Ce(e);case 421:return Gn(e);case 444:return Kn(e);case 445:return Zn(e);case 466:return Jn(e);case 481:return Ce(globalThis.decodeURIComponent(e));default:return Tt(e,"base16")}}const Ee=Object.values(Te).map(t=>t.decoder),qn=function(){let t=Ee[0].or(Ee[1]);return Ee.slice(2).forEach(e=>t=t.or(e)),t}();function it(t){if(!Ot(t))throw new Error("invalid ip address");return It(t)}function Wn(t){const e=Rn(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!Ot(e))throw new Error("invalid ip address");return e}function Qe(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function Nt(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function Ce(t){const e=Tt(t),r=Uint8Array.from(pe(e.length));return k([r,e],r.length+e.length)}function Ae(t){const e=re(t);if(t=t.slice(R(e)),t.length!==e)throw new Error("inconsistent lengths");return L(t)}function Gn(t){let e;t[0]==="Q"||t[0]==="1"?e=Et(_.decode(`z${t}`)).bytes:e=Ct.parse(t).multihash.bytes;const r=Uint8Array.from(pe(e.length));return k([r,e],r.length+e.length)}function Jn(t){const e=qn.decode(t),r=Uint8Array.from(pe(e.length));return k([r,e],r.length+e.length)}function Qn(t){const e=re(t),r=t.slice(R(e));if(r.length!==e)throw new Error("inconsistent lengths");return"u"+L(r,"base64url")}function Xn(t){const e=re(t),r=t.slice(R(e));if(r.length!==e)throw new Error("inconsistent lengths");return L(r,"base58btc")}function Kn(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=V.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const s=Qe(n);return k([r,s],r.length+s.length)}function Zn(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=V.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const s=Qe(n);return k([r,s],r.length+s.length)}function at(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=L(e,"base32"),s=Nt(r);return`${n}:${s}`}function Hn(t){t=Ie(t);const e=[],r=[];let n=null;const s=t.split("/").slice(1);if(s.length===1&&s[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let o=0;o<s.length;o++){const i=s[o],a=m(i);if(a.size===0){e.push([a.code]),r.push([a.code]);continue}if(o++,o>=s.length)throw Lt("invalid address: "+t);if(a.path===!0){n=Ie(s.slice(o).join("/")),e.push([a.code,ot(a.code,n)]),r.push([a.code,n]);break}const d=ot(a.code,s[o]);e.push([a.code,d]),r.push([a.code,Dt(a.code,d)])}return{string:_t(r),bytes:Ft(e),tuples:e,stringTuples:r,path:n}}function ct(t){const e=[],r=[];let n=null,s=0;for(;s<t.length;){const o=re(t,s),i=R(o),a=m(o),d=Yn(a,t.slice(s+i));if(d===0){e.push([o]),r.push([o]),s+=i;continue}const w=t.slice(s+i,s+i+d);if(s+=d+i,s>t.length)throw Lt("Invalid address Uint8Array: "+L(t,"base16"));e.push([o,w]);const l=Dt(o,w);if(r.push([o,l]),a.path===!0){n=l;break}}return{bytes:Uint8Array.from(t),string:_t(r),tuples:e,stringTuples:r,path:n}}function _t(t){const e=[];return t.map(r=>{const n=m(r[0]);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),Ie(e.join("/"))}function Ft(t){return k(t.map(e=>{const r=m(e[0]);let n=Uint8Array.from(pe(r.code));return e.length>1&&e[1]!=null&&(n=k([n,e[1]])),n}))}function Yn(t,e){if(t.size>0)return t.size/8;if(t.size===0)return 0;{const r=re(e instanceof Uint8Array?e:Uint8Array.from(e));return r+R(r)}}function Ie(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function Lt(t){return new Error("Error parsing address: "+t)}const es=Symbol.for("nodejs.util.inspect.custom"),Bt=Symbol.for("@multiformats/js-multiaddr/multiaddr"),ts=[m("dns").code,m("dns4").code,m("dns6").code,m("dnsaddr").code];class rs extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}}class W{bytes;#t;#e;#r;#n;[Bt]=!0;constructor(e){e==null&&(e="");let r;if(e instanceof Uint8Array)r=ct(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);r=Hn(e)}else if(ss(e))r=ct(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,this.#t=r.string,this.#e=r.tuples,this.#r=r.stringTuples,this.#n=r.path}toString(){return this.#t}toJSON(){return this.toString()}toOptions(){let e,r,n,s,o="";const i=m("tcp"),a=m("udp"),d=m("ip4"),w=m("ip6"),l=m("dns6"),C=m("ip6zone");for(const[I,c]of this.stringTuples())I===C.code&&(o=`%${c??""}`),ts.includes(I)&&(r=i.name,s=443,n=`${c??""}${o}`,e=I===l.code?6:4),(I===i.code||I===a.code)&&(r=m(I).name,s=parseInt(c??"")),(I===d.code||I===w.code)&&(r=m(I).name,n=`${c??""}${o}`,e=I===w.code?6:4);if(e==null||r==null||n==null||s==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:r,port:s}}protos(){return this.#e.map(([e])=>Object.assign({},m(e)))}protoCodes(){return this.#e.map(([e])=>e)}protoNames(){return this.#e.map(([e])=>m(e).name)}tuples(){return this.#e}stringTuples(){return this.#r}encapsulate(e){return e=new W(e),new W(this.toString()+e.toString())}decapsulate(e){const r=e.toString(),n=this.toString(),s=n.lastIndexOf(r);if(s<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new W(n.slice(0,s))}decapsulateCode(e){const r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new W(Ft(r.slice(0,n)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach(([n,s])=>{n===Y.p2p.code&&e.push([n,s]),n===Y["p2p-circuit"].code&&(e=[])});const r=e.pop();if(r?.[1]!=null){const n=r[1];return n[0]==="Q"||n[0]==="1"?L(_.decode(`z${n}`),"base58btc"):L(Ct.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return this.#n}equals(e){return tn(this.bytes,e.bytes)}async resolve(e){const r=this.protos().find(o=>o.resolvable);if(r==null)return[this];const n=ns.get(r.name);if(n==null)throw new rs(`no available resolver for ${r.name}`);return(await n(this,e)).map(o=>be(o))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[es](){return`Multiaddr(${this.#t})`}}const ns=new Map;function ss(t){return!!t?.[Bt]}function be(t){return new W(t)}const os=u("dns4"),is=u("dns6"),as=u("dnsaddr"),q=A(u("dns"),as,os,is),we=A(u("ip4"),u("ip6")),Q=A(h(we,u("tcp")),h(q,u("tcp"))),ge=h(we,u("udp")),cs=h(ge,u("utp")),us=h(ge,u("quic")),ds=h(ge,u("quic-v1")),De=A(h(Q,u("ws")),h(q,u("ws"))),ut=A(h(De,u("p2p")),De),Ne=A(h(Q,u("wss")),h(q,u("wss")),h(Q,u("tls"),u("ws")),h(q,u("tls"),u("ws"))),dt=A(h(Ne,u("p2p")),Ne),_e=A(h(Q,u("http")),h(we,u("http")),h(q,u("http"))),Fe=A(h(Q,u("https")),h(we,u("https")),h(q,u("https"))),ht=h(ge,u("webrtc-direct"),u("certhash")),jt=A(h(ht,u("p2p")),ht),lt=h(ds,u("webtransport"),u("certhash"),u("certhash")),Rt=A(h(lt,u("p2p")),lt),Vt=A(h(ut,u("p2p-webrtc-star"),u("p2p")),h(dt,u("p2p-webrtc-star"),u("p2p")),h(ut,u("p2p-webrtc-star")),h(dt,u("p2p-webrtc-star"))),kt=A(h(_e,u("p2p-webrtc-direct"),u("p2p")),h(Fe,u("p2p-webrtc-direct"),u("p2p")),h(_e,u("p2p-webrtc-direct")),h(Fe,u("p2p-webrtc-direct"))),Le=A(De,Ne,_e,Fe,Vt,kt,Q,cs,us,q,jt,Rt),j=A(h(Le,u("p2p")),Vt,kt,jt,Rt,u("p2p")),ft=A(h(j,u("p2p-circuit"),j),h(j,u("p2p-circuit")),h(u("p2p-circuit"),j),h(Le,u("p2p-circuit")),h(u("p2p-circuit"),Le),u("p2p-circuit")),qt=()=>A(h(ft,qt),ft),K=qt(),hs=A(h(K,j,K),h(j,K),h(K,j),K,j);function Wt(t){function e(r){let n;try{n=be(r)}catch{return!1}const s=t(n.protoNames());return s===null?!1:s===!0||s===!1?s:s.length===0}return e}function h(...t){function e(r){if(r.length<t.length)return null;let n=r;return t.some(s=>(n=typeof s=="function"?s().partialMatch(r):s.partialMatch(r),Array.isArray(n)&&(r=n),n===null)),n}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:Wt(e),partialMatch:e}}function A(...t){function e(n){let s=null;return t.some(o=>{const i=typeof o=="function"?o().partialMatch(n):o.partialMatch(n);return i!=null?(s=i,!0):!1}),s}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:Wt(e),partialMatch:e}}function u(t){const e=t;function r(s){let o;try{o=be(s)}catch{return!1}const i=o.protoNames();return i.length===1&&i[0]===e}function n(s){return s.length===0?null:s[0]===e?s.slice(1):null}return{toString:function(){return e},matches:r,partialMatch:n}}const ls=typeof navigator<"u"&&navigator.product==="ReactNative";function fs(){return ls?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const H=self.URL,Gt=fs();let ps=class{constructor(e="",r=Gt){this.super=new H(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return H.createObjectURL(e)}static revokeObjectURL(e){H.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function bs(t){if(typeof t=="string")return new H(t).toString();if(!(t instanceof H)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",s=t.protocol?t.protocol+"//":"",o=t.host||"",i=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),d=t.hash||"",w=t.pathname||"",l=t.path||w+a;return`${s}${e||r}${o||i+n}${l}${d}`}}var Jt={URLWithLegacySupport:ps,URLSearchParams:self.URLSearchParams,defaultBase:Gt,format:bs};const{URLWithLegacySupport:pt,format:ws}=Jt;var gs=(t,e={},r={},n)=>{let s=e.protocol?e.protocol.replace(":",""):"http";s=(r[s]||n||s)+":";let o;try{o=new pt(t)}catch{o={}}const i=Object.assign({},e,{protocol:s||o.protocol,host:e.host||o.host});return new pt(t,ws(i)).toString()};const{URLWithLegacySupport:ys,format:ms,URLSearchParams:vs,defaultBase:$s}=Jt,xs=gs;var Ss={URL:ys,URLSearchParams:vs,format:ms,relative:xs,defaultBase:$s};function Es(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Xe(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function Cs(t){return new TextEncoder().encode(t)}function As(t){return new TextDecoder().decode(t)}function Us(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),i=o.charCodeAt(0);if(r[i]!==255)throw new TypeError(o+" is ambiguous");r[i]=s}var a=t.length,d=t.charAt(0),w=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function C(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";for(var p=0,O=0,g=0,v=c.length;g!==v&&c[g]===0;)g++,p++;for(var $=(v-g)*l+1>>>0,b=new Uint8Array($);g!==v;){for(var x=c[g],U=0,y=$-1;(x!==0||U<O)&&y!==-1;y--,U++)x+=256*b[y]>>>0,b[y]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");O=U,g++}for(var E=$-O;E!==$&&b[E]===0;)E++;for(var B=d.repeat(p);E<$;++E)B+=t.charAt(b[E]);return B}function D(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;var p=0;if(c[p]!==" "){for(var O=0,g=0;c[p]===d;)O++,p++;for(var v=(c.length-p)*w+1>>>0,$=new Uint8Array(v);c[p];){var b=r[c.charCodeAt(p)];if(b===255)return;for(var x=0,U=v-1;(b!==0||x<g)&&U!==-1;U--,x++)b+=a*$[U]>>>0,$[U]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");g=x,p++}if(c[p]!==" "){for(var y=v-g;y!==v&&$[y]===0;)y++;for(var E=new Uint8Array(O+(v-y)),B=O;y!==v;)E[B++]=$[y++];return E}}}function I(c){var p=D(c);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:C,decodeUnsafe:D,decode:I}}var Ps=Us,zs=Ps;class Ms{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ts{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){this.name=e,this.prefix=r;const s=r.codePointAt(0);if(s===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=s,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Qt(this,e)}}class Os{decoders;constructor(e){this.decoders=e}or(e){return Qt(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function Qt(t,e){return new Os({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}class Is{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Ms(e,r,n),this.decoder=new Ts(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function ye({name:t,prefix:e,encode:r,decode:n}){return new Is(t,e,r,n)}function ne({name:t,prefix:e,alphabet:r}){const{encode:n,decode:s}=zs(r,t);return ye({prefix:e,name:t,encode:n,decode:o=>Xe(s(o))})}function Ds(t,e,r,n){const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let o=t.length;for(;t[o-1]==="=";)--o;const i=new Uint8Array(o*r/8|0);let a=0,d=0,w=0;for(let l=0;l<o;++l){const C=s[t[l]];if(C===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<r|C,a+=r,a>=8&&(a-=8,i[w++]=255&d>>a)}if(a>=r||255&d<<8-a)throw new SyntaxError("Unexpected end of data");return i}function Ns(t,e,r){const n=e[e.length-1]==="=",s=(1<<r)-1;let o="",i=0,a=0;for(let d=0;d<t.length;++d)for(a=a<<8|t[d],i+=8;i>r;)i-=r,o+=e[s&a>>i];if(i!==0&&(o+=e[s&a<<r-i]),n)for(;o.length*r&7;)o+="=";return o}function z({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return ye({prefix:e,name:t,encode(s){return Ns(s,n,r)},decode(s){return Ds(s,n,r,t)}})}const G=z({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_s=z({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Fs=z({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ls=z({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Bs=z({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),js=z({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Rs=z({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Vs=z({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ks=z({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),qs=Object.freeze(Object.defineProperty({__proto__:null,base32:G,base32hex:Bs,base32hexpad:Rs,base32hexpadupper:Vs,base32hexupper:js,base32pad:Fs,base32padupper:Ls,base32upper:_s,base32z:ks},Symbol.toStringTag,{value:"Module"})),F=ne({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ws=ne({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Gs=Object.freeze(Object.defineProperty({__proto__:null,base58btc:F,base58flickr:Ws},Symbol.toStringTag,{value:"Module"})),ie=ne({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Js=ne({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Qs=Object.freeze(Object.defineProperty({__proto__:null,base36:ie,base36upper:Js},Symbol.toStringTag,{value:"Module"}));var Xs=Xt,bt=128,Ks=127,Zs=~Ks,Hs=Math.pow(2,31);function Xt(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Hs;)e[r++]=t&255|bt,t/=128;for(;t&Zs;)e[r++]=t&255|bt,t>>>=7;return e[r]=t|0,Xt.bytes=r-n+1,e}var Ys=Be,eo=128,wt=127;function Be(t,n){var r=0,n=n||0,s=0,o=n,i,a=t.length;do{if(o>=a)throw Be.bytes=0,new RangeError("Could not decode varint");i=t[o++],r+=s<28?(i&wt)<<s:(i&wt)*Math.pow(2,s),s+=7}while(i>=eo);return Be.bytes=o-n,r}var to=Math.pow(2,7),ro=Math.pow(2,14),no=Math.pow(2,21),so=Math.pow(2,28),oo=Math.pow(2,35),io=Math.pow(2,42),ao=Math.pow(2,49),co=Math.pow(2,56),uo=Math.pow(2,63),ho=function(t){return t<to?1:t<ro?2:t<no?3:t<so?4:t<oo?5:t<io?6:t<ao?7:t<co?8:t<uo?9:10},lo={encode:Xs,decode:Ys,encodingLength:ho},de=lo;function je(t,e=0){return[de.decode(t,e),de.decode.bytes]}function he(t,e,r=0){return de.encode(t,e,r),e}function le(t){return de.encodingLength(t)}function fo(t,e){const r=e.byteLength,n=le(t),s=n+le(r),o=new Uint8Array(s+r);return he(t,o,0),he(r,o,n),o.set(e,s),new Ke(t,r,e,o)}function Kt(t){const e=Xe(t),[r,n]=je(e),[s,o]=je(e.subarray(n)),i=e.subarray(n+o);if(i.byteLength!==s)throw new Error("Incorrect length");return new Ke(r,s,i,e)}function po(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Es(t.bytes,r.bytes)}}class Ke{code;size;digest;bytes;constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}function gt(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return wo(r,Re(t),e??F.encoder);default:return go(r,Re(t),e??G.encoder)}}const yt=new WeakMap;function Re(t){const e=yt.get(t);if(e==null){const r=new Map;return yt.set(t,r),r}return e}class S{code;version;multihash;bytes;"/";constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==Z)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==yo)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return S.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=fo(e,r);return S.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return S.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&po(e.multihash,n.multihash)}toString(e){return gt(this,e)}toJSON(){return{"/":gt(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof S)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:s,multihash:o,bytes:i}=r;return new S(n,s,o,i??mt(n,s,o.bytes))}else if(r[mo]===!0){const{version:n,multihash:s,code:o}=r,i=Kt(s);return S.create(n,o,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Z)throw new Error(`Version 0 CID must use dag-pb (code: ${Z}) block encoding`);return new S(e,r,n,n.bytes)}case 1:{const s=mt(e,r,n.bytes);return new S(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return S.create(0,Z,e)}static createV1(e,r){return S.create(1,e,r)}static decode(e){const[r,n]=S.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=S.inspectBytes(e),n=r.size-r.multihashSize,s=Xe(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");const o=s.subarray(r.multihashSize-r.digestSize),i=new Ke(r.multihashCode,r.digestSize,o,s);return[r.version===0?S.createV0(i):S.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[C,D]=je(e.subarray(r));return r+=D,C};let s=n(),o=Z;if(s===18?(s=0,r=0):o=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);const i=r,a=n(),d=n(),w=r+d,l=w-i;return{version:s,codec:o,multihashCode:a,digestSize:d,multihashSize:l,size:w}}static parse(e,r){const[n,s]=bo(e,r),o=S.decode(s);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Re(o).set(n,e),o}}function bo(t,e){switch(t[0]){case"Q":{const r=e??F;return[F.prefix,r.decode(`${F.prefix}${t}`)]}case F.prefix:{const r=e??F;return[F.prefix,r.decode(t)]}case G.prefix:{const r=e??G;return[G.prefix,r.decode(t)]}case ie.prefix:{const r=e??ie;return[ie.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function wo(t,e,r){const{prefix:n}=r;if(n!==F.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const s=e.get(n);if(s==null){const o=r.encode(t).slice(1);return e.set(n,o),o}else return s}function go(t,e,r){const{prefix:n}=r,s=e.get(n);if(s==null){const o=r.encode(t);return e.set(n,o),o}else return s}const Z=112,yo=18;function mt(t,e,r){const n=le(t),s=n+le(e),o=new Uint8Array(s+r.byteLength);return he(t,o,0),he(e,o,n),o.set(r,s),o}const mo=Symbol.for("@ipld/js-cid/CID"),vo=ne({prefix:"9",name:"base10",alphabet:"0123456789"}),$o=Object.freeze(Object.defineProperty({__proto__:null,base10:vo},Symbol.toStringTag,{value:"Module"})),xo=z({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),So=z({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Eo=Object.freeze(Object.defineProperty({__proto__:null,base16:xo,base16upper:So},Symbol.toStringTag,{value:"Module"})),Co=z({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Ao=Object.freeze(Object.defineProperty({__proto__:null,base2:Co},Symbol.toStringTag,{value:"Module"})),Zt=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Uo=Zt.reduce((t,e,r)=>(t[r]=e,t),[]),Po=Zt.reduce((t,e,r)=>{const n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return t[n]=r,t},[]);function zo(t){return t.reduce((e,r)=>(e+=Uo[r],e),"")}function Mo(t){const e=[];for(const r of t){const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);const s=Po[n];if(s==null)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const To=ye({prefix:"🚀",name:"base256emoji",encode:zo,decode:Mo}),Oo=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:To},Symbol.toStringTag,{value:"Module"})),Io=z({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Do=z({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),No=z({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_o=z({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Fo=Object.freeze(Object.defineProperty({__proto__:null,base64:Io,base64pad:Do,base64url:No,base64urlpad:_o},Symbol.toStringTag,{value:"Module"})),Lo=z({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Bo=Object.freeze(Object.defineProperty({__proto__:null,base8:Lo},Symbol.toStringTag,{value:"Module"})),jo=ye({prefix:"\0",name:"identity",encode:t=>As(t),decode:t=>Cs(t)}),Ro=Object.freeze(Object.defineProperty({__proto__:null,identity:jo},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const vt={...Ro,...Ao,...Bo,...$o,...Eo,...qs,...Qs,...Gs,...Fo,...Oo};function Vo(t=0){return new Uint8Array(t)}function Ht(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const $t=Ht("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ue=Ht("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Vo(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),ko={utf8:$t,"utf-8":$t,hex:vt.base16,latin1:Ue,ascii:Ue,binary:Ue,...vt};function qo(t,e="utf8"){const r=ko[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}const Yt=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,ee=/^\/(ip[fn]s)\/([^/?#]+)/,er=1,tr=2,me=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,rr=1,nr=2,Wo=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function oi(t){const e=Ze(t);if(e===!1)return!1;try{Kt(F.decode(`z${e}`))}catch{return!1}return!0}function Go(t){try{return!!be(t)}catch{return!1}}function Jo(t){try{let e;if(xe(t)?e=S.parse(t):e=S.asCID(t),e==null)return!1;G.decode(e.toString())}catch{return!1}return!0}function ve(t){try{return xe(t)?!!S.parse(t):t instanceof Uint8Array?!!S.decode(t):!!S.asCID(t)}catch{return!1}}function ii(t){return Go(t)&&hs.matches(t)}function se(t,e,r=er,n=tr){const s=Ze(t);if(s===!1)return!1;const o=s.match(e);if(o==null||o[r]!=="ipfs")return!1;let i=o[n];return i!=null&&e===me&&(i=i.toLowerCase()),ve(i)}function $e(t,e,r=er,n=tr){const s=Ze(t);if(s===!1)return!1;const o=s.match(e);if(o==null||o[r]!=="ipns")return!1;let i=o[n];if(i!=null&&e===me){if(i=i.toLowerCase(),ve(i))return!0;try{!i.includes(".")&&i.includes("-")&&(i=i.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));const{hostname:a}=new Ss.URL(`http://${i}`);return Wo.test(a)}catch{return!1}}return!0}function xe(t){return typeof t=="string"}function Ze(t){return t instanceof Uint8Array?qo(t,"base58btc"):xe(t)?t:!1}const sr=t=>se(t,me,nr,rr),or=t=>$e(t,me,nr,rr),Qo=t=>sr(t)||or(t),Xo=t=>se(t,Yt)||sr(t),Ko=t=>$e(t,Yt)||or(t),Zo=t=>Xo(t)||Ko(t)||Qo(t),Ho=t=>se(t,ee)||$e(t,ee),ai=t=>ve(t)&&Jo(t),ci=t=>se(t,ee),ui=t=>$e(t,ee),di=t=>Zo(t)||Ho(t),hi=t=>xe(t)&&!ve(t)&&se(`/ipfs/${t}`,ee);export{ai as base32cid,ve as cid,hi as cidPath,ci as ipfsPath,sr as ipfsSubdomain,Xo as ipfsUrl,ui as ipnsPath,or as ipnsSubdomain,Ko as ipnsUrl,Go as multiaddr,oi as multihash,Ho as path,Yt as pathGatewayPattern,ee as pathPattern,ii as peerMultiaddr,Qo as subdomain,me as subdomainGatewayPattern,Zo as url,di as urlOrPath};
